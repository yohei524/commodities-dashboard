{% extends "base.html" %}

{% block title %}地政学リスク | Geopolitics × Commodities{% endblock %}

{% block content %}
<div style="display: flex; flex-direction: column; gap: 32px;">

    <!-- ヘッダー -->
    <div class="glass-card gold-border" style="padding: 32px;">
        <h1 style="font-size: 2rem; font-weight: 900; margin-bottom: 8px;">
            <span>🌍</span> 地政学リスク分析
        </h1>
        <p style="color: var(--text-secondary);">
            世界の緊張と市場への影響を追う
        </p>
    </div>

    <!-- 総合リスク指数 -->
    <div class="glass-card" style="padding: 24px; text-align: center;">
        <h2 style="font-size: 1rem; color: var(--text-muted); margin-bottom: 8px;">総合地政学リスク指数</h2>
        <p style="font-size: 5rem; font-weight: 900; color: var(--danger);">{{ risks.overall_index | default('78') }}</p>
        <span class="risk-level {{ risks.overall_level | default('high') }}" style="font-size: 1rem; padding: 8px 24px;">
            {{ risks.overall_label | default('HIGH RISK') }}
        </span>
        <p style="color: var(--text-secondary); margin-top: 16px; font-size: 0.875rem;">
            過去30日平均: {{ risks.avg_30d | default('72') }} | 過去90日平均: {{ risks.avg_90d | default('68') }}
        </p>
    </div>

    <!-- 地域別リスク -->
    <div class="glass-card" style="padding: 24px;">
        <h2 class="section-title">
            <span class="icon">🗺️</span>
            地域別リスク詳細
        </h2>
        <div style="display: flex; flex-direction: column; gap: 24px;">

            <!-- 中東 -->
            <div style="padding: 24px; background: rgba(220, 53, 69, 0.1); border-radius: 12px; border-left: 4px solid var(--danger);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="font-size: 1.25rem; font-weight: 700;">🇮🇱 中東（イラン-イスラエル）</h3>
                    <span class="risk-level critical">CRITICAL</span>
                </div>
                <div class="grid grid-2">
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">現状</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>イスラエルとハマスの戦闘継続</li>
                            <li>イランの核開発疑惑</li>
                            <li>フーシ派による紅海攻撃</li>
                            <li>レバノン・ヒズボラとの緊張</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">市場への影響</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>原油：ホルムズ海峡リスクで急騰可能性</li>
                            <li>金：セーフヘイブン需要で上昇</li>
                            <li>軍需株：米国防衛株上昇</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- ウクライナ -->
            <div style="padding: 24px; background: rgba(255, 193, 7, 0.1); border-radius: 12px; border-left: 4px solid var(--warning);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="font-size: 1.25rem; font-weight: 700;">🇺🇦 ウクライナ-ロシア</h3>
                    <span class="risk-level high">HIGH</span>
                </div>
                <div class="grid grid-2">
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">現状</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>戦線は膠着状態</li>
                            <li>ロシアの攻撃激化</li>
                            <li>欧米の支援継続vs疲弊</li>
                            <li>和平交渉の行方不透明</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">市場への影響</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>天然ガス価格への影響</li>
                            <li>欧州経済への重石</li>
                            <li>NATO軍需株への追い風</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 台湾海峡 -->
            <div style="padding: 24px; background: rgba(255, 193, 7, 0.1); border-radius: 12px; border-left: 4px solid var(--warning);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="font-size: 1.25rem; font-weight: 700;">🇹🇼 台湾海峡</h3>
                    <span class="risk-level high">HIGH</span>
                </div>
                <div class="grid grid-2">
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">現状</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>中国の軍事演習増加</li>
                            <li>米国の台湾支援強化</li>
                            <li>日本の防衛力強化</li>
                            <li>半導体供給リスク</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">市場への影響</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>半導体株のボラティリティ</li>
                            <li>日本株への下押し圧力</li>
                            <li>日本軍需株は上昇</li>
                            <li>金は上昇要因</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 日本 -->
            <div style="padding: 24px; background: rgba(23, 162, 184, 0.1); border-radius: 12px; border-left: 4px solid var(--info);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="font-size: 1.25rem; font-weight: 700;">🇯🇵 日本政治動向</h3>
                    <span class="risk-level medium">MEDIUM</span>
                </div>
                <div class="grid grid-2">
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">高市政権の方針</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>防衛予算GDP比2%への増額</li>
                            <li>敵基地攻撃能力の整備</li>
                            <li>日米同盟の強化</li>
                            <li>経済安全保障の推進</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="font-weight: 600; color: var(--gold); margin-bottom: 8px;">市場への影響</h4>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; padding-left: 20px;">
                            <li>三菱重工、川崎重工に追い風</li>
                            <li>財政への懸念で円安要因</li>
                            <li>防衛関連ETFに資金流入</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- コモディティ相関 -->
    <div class="glass-card" style="padding: 24px;">
        <h2 class="section-title">
            <span class="icon">📊</span>
            地政学リスクとコモディティの相関
        </h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>シナリオ</th>
                    <th>金</th>
                    <th>銀</th>
                    <th>原油</th>
                    <th>軍需株</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="font-weight: 600;">中東緊張激化</td>
                    <td style="color: var(--success);">↑↑↑</td>
                    <td style="color: var(--success);">↑↑</td>
                    <td style="color: var(--success);">↑↑↑</td>
                    <td style="color: var(--success);">↑↑</td>
                </tr>
                <tr>
                    <td style="font-weight: 600;">ウクライナ長期化</td>
                    <td style="color: var(--success);">↑</td>
                    <td style="color: var(--success);">↑</td>
                    <td>→</td>
                    <td style="color: var(--success);">↑↑</td>
                </tr>
                <tr>
                    <td style="font-weight: 600;">台湾海峡危機</td>
                    <td style="color: var(--success);">↑↑↑</td>
                    <td style="color: var(--success);">↑↑</td>
                    <td style="color: var(--success);">↑↑</td>
                    <td style="color: var(--success);">↑↑↑</td>
                </tr>
                <tr>
                    <td style="font-weight: 600;">緊張緩和・和平</td>
                    <td style="color: var(--danger);">↓</td>
                    <td>→</td>
                    <td style="color: var(--danger);">↓</td>
                    <td style="color: var(--danger);">↓</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ニュースタイムライン -->
    <div class="glass-card" style="padding: 24px;">
        <h2 class="section-title">
            <span class="icon">📰</span>
            最新地政学ニュース
        </h2>
        <div style="display: flex; flex-direction: column; gap: 16px;">
            {% for news in risks.news | default([
                {'date': '2026-01-28', 'region': '中東', 'title': 'イスラエル、レバノン国境で軍事活動活発化', 'impact': 'high'},
                {'date': '2026-01-27', 'region': 'ウクライナ', 'title': 'ロシア、新たな攻勢開始との報道', 'impact': 'medium'},
                {'date': '2026-01-26', 'region': '台湾', 'title': '中国軍、台湾周辺で大規模演習', 'impact': 'high'},
                {'date': '2026-01-25', 'region': '日本', 'title': '高市首相、防衛予算増額を表明', 'impact': 'medium'},
                {'date': '2026-01-24', 'region': '中東', 'title': 'フーシ派、紅海で商船攻撃', 'impact': 'high'}
            ]) %}
            <div style="display: flex; gap: 16px; padding: 16px; border-bottom: 1px solid rgba(212, 175, 55, 0.1);">
                <div style="min-width: 80px; color: var(--text-muted); font-size: 0.875rem;">{{ news.date }}</div>
                <span class="tag {% if news.region == '中東' %}tag-gold{% elif news.region == 'ウクライナ' %}tag-silver{% else %}tag-oil{% endif %}">
                    {{ news.region }}
                </span>
                <p style="flex: 1;">{{ news.title }}</p>
                <span class="risk-level {{ news.impact }}">
                    {% if news.impact == 'high' %}HIGH{% else %}MED{% endif %}
                </span>
            </div>
            {% endfor %}
        </div>
    </div>

</div>
{% endblock %}
